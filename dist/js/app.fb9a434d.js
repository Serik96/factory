(function(){"use strict";var t={5537:function(t,e,r){var o=r(9242),a=r(3396);function i(t,e,r,o,i,n){const s=(0,a.up)("Header"),l=(0,a.up)("router-view");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)(s),(0,a.Wm)(l)],64)}var n=r.p+"img/logo.a5a5fad6.svg",s=r.p+"img/search.1feb3628.svg",l=r.p+"img/favorites.c6956d56.svg";const c={class:"header"},d={class:"header-wrapper"},u={class:"header-logo"},h=(0,a._)("img",{src:n,alt:"logo"},null,-1),p={class:"header-menu"},m={key:0,class:"header-search"},v=(0,a._)("img",{src:s,style:{width:"23px",height:"23px"},alt:"search"},null,-1),g=(0,a._)("p",null,"Поиск",-1),f={class:"header-favorites"},w=(0,a._)("img",{src:l,style:{width:"23px",height:"23px"},alt:"favorites"},null,-1),_=(0,a._)("p",null,"Избранное",-1);function x(t,e,r,o,i,n){const s=(0,a.up)("router-link");return(0,a.wg)(),(0,a.iD)("div",c,[(0,a._)("div",d,[(0,a._)("div",u,[(0,a.Wm)(s,{to:"/"},{default:(0,a.w5)((()=>[h])),_:1})]),(0,a._)("div",p,[n.showSearch?((0,a.wg)(),(0,a.iD)("div",m,[(0,a.Wm)(s,{to:"/"},{default:(0,a.w5)((()=>[v])),_:1}),(0,a.Wm)(s,{to:"/"},{default:(0,a.w5)((()=>[g])),_:1})])):(0,a.kq)("",!0),(0,a._)("div",f,[(0,a.Wm)(s,{to:"/favorites"},{default:(0,a.w5)((()=>[w])),_:1}),(0,a.Wm)(s,{to:"/favorites"},{default:(0,a.w5)((()=>[_])),_:1})])])])])}var D={name:"headerComponent",computed:{showSearch(){return"/"!==this.$route.path}}},F=r(89);const y=(0,F.Z)(D,[["render",x]]);var b=y,k={name:"App",components:{Header:b}};const P=(0,F.Z)(k,[["render",i]]);var T=P,C=r(2483);function I(t,e,r,o,i,n){const s=(0,a.up)("Search"),l=(0,a.up)("MainContent");return(0,a.wg)(),(0,a.iD)("div",null,[(0,a.Wm)(s,{onUpdateFilter:n.updateFilter},null,8,["onUpdateFilter"]),(0,a.Wm)(l,{filterText:i.filterText},null,8,["filterText"])])}var j=r.p+"img/search-black.f8038178.svg";const O={class:"search"},S={class:"search-wrapper"},W=(0,a._)("img",{src:j,alt:"search"},null,-1);function Z(t,e,r,i,n,s){return(0,a.wg)(),(0,a.iD)("div",O,[(0,a._)("div",S,[(0,a.wy)((0,a._)("input",{type:"text",placeholder:"Поиск","onUpdate:modelValue":e[0]||(e[0]=t=>n.searchText=t),onInput:e[1]||(e[1]=(...t)=>s.updateFilter&&s.updateFilter(...t))},null,544),[[o.nr,n.searchText]]),W])])}var $={name:"searchComponent",data(){return{searchText:""}},methods:{updateFilter(){this.$emit("update-filter",this.searchText)}}};const q=(0,F.Z)($,[["render",Z]]);var H=q,Y=r(7139),M=r.p+"img/cat-head.556c81f6.gif";const z={class:"mainContent"},L={key:0,class:"loader-container"},R=(0,a._)("div",{class:"loader"},null,-1),E=[R],U={key:1,class:"error-container"},A={class:"error-message"},G=(0,a._)("img",{src:M,alt:"Error Animation",class:"error-gif"},null,-1),K={key:2,class:"image-wrapper"},N={class:"image-container__inner"},V=["src","alt"];function B(t,e,r,o,i,n){const s=(0,a.up)("router-link");return(0,a.wg)(),(0,a.iD)("div",z,[i.loading?((0,a.wg)(),(0,a.iD)("div",L,E)):(0,a.kq)("",!0),t.error?((0,a.wg)(),(0,a.iD)("div",U,[(0,a._)("div",A,(0,Y.zw)(t.error),1),G])):(0,a.kq)("",!0),i.loading||t.error?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("div",K,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(i.randomImages,(t=>((0,a.wg)(),(0,a.iD)("div",{key:t.id,class:"image-container"},[(0,a._)("div",N,[(0,a.Wm)(s,{to:{name:"photoPage",params:{id:t?.id}}},{default:(0,a.w5)((()=>[(0,a._)("img",{src:t.urls.regular,alt:t?.description},null,8,V)])),_:2},1032,["to"])])])))),128))]))])}var J=r(3738),Q=r.n(J),X={name:"mainContent",props:{filterText:String},data(){return{randomImages:[],loading:!1}},watch:{filterText:{handler:"RandomImagesDebounced",immediate:!0,error:null}},methods:{async fetchRandomImages(){this.loading=!0;try{const t=await fetch(`https://api.unsplash.com/photos/random/?count=8&client_id=IjwLrN04z7hqo9HxnFDYh183gM3GYSbjdFtf0SLd-pk&query=${this.filterText}`);if(404===t.status)return void(this.error="Изображения не найдены");const e=await t.json();this.randomImages=e}catch(t){this.error="Произошла ошибка при загрузке изображений",console.error("Картинки не подгрузились",t)}finally{this.loading=!1}},RandomImagesDebounced:Q()((function(){this.loading=!0,this.error=null,this.fetchRandomImages()}),1500)}};const tt=(0,F.Z)(X,[["render",B]]);var et=tt,rt={name:"homePage",components:{Search:H,MainContent:et},data(){return{filterText:""}},methods:{updateFilter(t){const e=t.trim();""!==e&&(this.filterText=e)}}};const ot=(0,F.Z)(rt,[["render",I]]);var at=ot,it=r.p+"img/favorites_white.606ca102.svg";const nt={class:"favorites"},st={class:"favorites-wrapper"},lt=(0,a._)("div",{class:"favorites-title"},"Избранное",-1),ct=["onClick"],dt={class:"image-container__inner"},ut=["src"];function ht(t,e,r,o,i,n){return(0,a.wg)(),(0,a.iD)("div",nt,[(0,a._)("div",st,[lt,((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(n.favorites,(t=>((0,a.wg)(),(0,a.iD)("div",{key:t.id,class:"image-container"},[(0,a._)("img",{onClick:e=>n.removeFromFavorites(t),class:"active-favorites",src:it,alt:"favorites"},null,8,ct),(0,a._)("div",dt,[(0,a._)("img",{src:t.urls.regular,alt:"Favorite Photo"},null,8,ut)])])))),128))])])}var pt={name:"favoritePage",computed:{favorites(){return this.$store.state?.favorites}},methods:{removeFromFavorites(t){this.$store.commit("removeFromFavorites",t)}}};const mt=(0,F.Z)(pt,[["render",ht]]);var vt=mt,gt=r.p+"img/download.6c759fe4.svg";const ft={class:"photoPage"},wt=(0,a._)("div",{class:"photoPage-bcg"},null,-1),_t={class:"photoPage-wrapper"},xt={class:"photoPage-info__left"},Dt=["src"],Ft={class:"photoPage-descr"},yt={class:"photoPage-title"},bt={class:"photoPage-author"},kt={class:"photoPage-info__right"},Pt=(0,a._)("img",{src:it,width:"49px",height:"49px"},null,-1),Tt=[Pt],Ct=(0,a._)("img",{src:gt,width:"26px",height:"26px"},null,-1),It=(0,a._)("span",null,"Downloand",-1),jt=[Ct,It],Ot={class:"photoPage-image"},St=["src"];function Wt(t,e,r,o,i,n){return(0,a.wg)(),(0,a.iD)("div",ft,[wt,(0,a._)("div",_t,[(0,a._)("div",xt,[(0,a._)("img",{src:i.photoData.user?.profile_image?.medium,width:"55px",height:"55px",class:"photoPage-avatar"},null,8,Dt),(0,a._)("div",Ft,[(0,a._)("div",yt,(0,Y.zw)(i.photoData.user?.name),1),(0,a._)("div",bt,"@"+(0,Y.zw)(i.photoData.user?.username),1)])]),(0,a._)("div",kt,[(0,a._)("button",{class:(0,Y.C_)(["favorite-btn",{"favorite-active":n.isFavorite}]),onClick:e[0]||(e[0]=(...t)=>n.toggleFavorite&&n.toggleFavorite(...t))},Tt,2),(0,a._)("button",{class:"download-btn",onClick:e[1]||(e[1]=(...t)=>n.downloadImage&&n.downloadImage(...t))},jt)]),(0,a._)("div",Ot,[(0,a._)("img",{src:i.photoData.urls?.regular,alt:"Image"},null,8,St)])])])}var Zt=r(4161),$t=r(65),qt={name:"photoPage",props:{id:String},data(){return{photoData:{}}},computed:{...(0,$t.rn)(["favorites"]),isFavorite(){return this.favorites.some((t=>t.id===this.photoData.id))}},methods:{downloadImage(){const t=this.photoData.urls?.regular,e=document.createElement("a");e.href=t,e.download="downloaded_image.jpg",document.body.appendChild(e),e.click(),document.body.removeChild(e)},toggleFavorite(){this.isFavorite?this.$store.commit("removeFromFavorites",this.photoData):this.$store.commit("addToFavorites",this.photoData)}},created(){Zt.Z.get(`https://api.unsplash.com/photos/${this.id}?client_id=IjwLrN04z7hqo9HxnFDYh183gM3GYSbjdFtf0SLd-pk`).then((t=>{this.photoData=t.data,console.log(this.photoData)})).catch((t=>{console.error("Ошибка при загрузке данных",t)}))}};const Ht=(0,F.Z)(qt,[["render",Wt]]);var Yt=Ht;const Mt=[{path:"/",component:at},{path:"/favorites",name:"favorites",component:vt,props:!0},{path:"/photoPage/:id",name:"photoPage",component:Yt,props:!0}],zt=(0,C.p7)({history:(0,C.PO)(),routes:Mt});var Lt=zt,Rt=(r(7658),r(2415));const Et=(0,$t.MT)({state(){return{favorites:[]}},mutations:{addToFavorites(t,e){t.favorites.push(e)},removeFromFavorites(t,e){const r=t.favorites.findIndex((t=>t.id===e.id));-1!==r&&t.favorites.splice(r,1)}},plugins:[(0,Rt.Z)({key:"my-vuex-store",paths:["favorites"]})]});var Ut=Et;const At=(0,o.ri)(T);At.use(Ut),At.use(Lt),At.mount("#app")}},e={};function r(o){var a=e[o];if(void 0!==a)return a.exports;var i=e[o]={exports:{}};return t[o].call(i.exports,i,i.exports,r),i.exports}r.m=t,function(){var t=[];r.O=function(e,o,a,i){if(!o){var n=1/0;for(d=0;d<t.length;d++){o=t[d][0],a=t[d][1],i=t[d][2];for(var s=!0,l=0;l<o.length;l++)(!1&i||n>=i)&&Object.keys(r.O).every((function(t){return r.O[t](o[l])}))?o.splice(l--,1):(s=!1,i<n&&(n=i));if(s){t.splice(d--,1);var c=a();void 0!==c&&(e=c)}}return e}i=i||0;for(var d=t.length;d>0&&t[d-1][2]>i;d--)t[d]=t[d-1];t[d]=[o,a,i]}}(),function(){r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,{a:e}),e}}(),function(){r.d=function(t,e){for(var o in e)r.o(e,o)&&!r.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})}}(),function(){r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){r.p="/"}(),function(){var t={143:0};r.O.j=function(e){return 0===t[e]};var e=function(e,o){var a,i,n=o[0],s=o[1],l=o[2],c=0;if(n.some((function(e){return 0!==t[e]}))){for(a in s)r.o(s,a)&&(r.m[a]=s[a]);if(l)var d=l(r)}for(e&&e(o);c<n.length;c++)i=n[c],r.o(t,i)&&t[i]&&t[i][0](),t[i]=0;return r.O(d)},o=self["webpackChunkfactory"]=self["webpackChunkfactory"]||[];o.forEach(e.bind(null,0)),o.push=e.bind(null,o.push.bind(o))}();var o=r.O(void 0,[998],(function(){return r(5537)}));o=r.O(o)})();
//# sourceMappingURL=app.fb9a434d.js.map